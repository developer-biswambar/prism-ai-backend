# Miscellaneous Data Processing - Testing Guide

This guide provides comprehensive test scenarios for the Miscellaneous Data Processing feature using AI-powered natural language queries with DuckDB.

## Test Data Files

### 1. Sales Data (`test_data_sales.csv`)
**Description**: E-commerce sales transactions with customer, product, and order details  
**Records**: 20 orders from January-February 2024  
**Key Fields**: order_id, customer_id, customer_name, product_id, product_name, category, quantity, unit_price, total_amount, order_date, sales_rep, region, payment_method, status

### 2. Inventory Data (`test_data_inventory.csv`)
**Description**: Product inventory with stock levels, supplier info, and warehouse details  
**Records**: 20 products across Electronics, Furniture, and Appliances  
**Key Fields**: product_id, product_name, category, supplier_id, supplier_name, current_stock, reorder_level, unit_cost, retail_price, last_restock_date, warehouse_location, status

---

## Test Scenarios by Complexity

### ðŸŸ¢ **Basic Single-File Analysis**

#### **Scenario 1: Sales Summary Analysis**
- **Files**: Sales Data only
- **Prompts**:
  ```
  "Show me total sales amount by region"
  "List all orders with status 'Pending' or 'Processing'"
  "Find the top 5 best-selling products by quantity"
  "Calculate average order value by payment method"
  "Show monthly sales totals for January and February 2024"
  ```

#### **Scenario 2: Inventory Health Check**
- **Files**: Inventory Data only
- **Prompts**:
  ```
  "Show all products with low stock status"
  "List products that need immediate reordering (current stock <= reorder level)"
  "Calculate total inventory value by category"
  "Find suppliers with the most products in our inventory"
  "Show products by warehouse location with their stock levels"
  ```

### ðŸŸ¡ **Intermediate Cross-File Analysis**

#### **Scenario 3: Sales vs Inventory Reconciliation**
- **Files**: Both Sales Data and Inventory Data
- **Prompts**:
  ```
  "Compare total quantities sold versus current inventory for each product"
  "Show products that were sold but don't exist in current inventory"
  "Calculate profit margin for each sold product (retail_price - unit_cost from inventory)"
  "Find which products have high sales but low current stock"
  "List products that haven't been sold at all but are in inventory"
  ```

#### **Scenario 4: Regional Performance Analysis**
- **Files**: Both Sales Data and Inventory Data
- **Prompts**:
  ```
  "Show sales performance by region with inventory availability"
  "Calculate potential revenue if we sold all current stock by region"
  "Find which categories are most popular in each sales region"
  "Compare unit costs vs actual selling prices by product category"
  ```

### ðŸ”´ **Advanced Complex Scenarios**

#### **Scenario 5: Business Intelligence Dashboard**
- **Files**: Both Sales Data and Inventory Data
- **Prompts**:
  ```
  "Create a comprehensive business report showing: total revenue, units sold, current inventory value, and profit margins by category"
  
  "Calculate inventory turnover ratio for each product (total quantity sold / average stock level)"
  
  "Identify slow-moving inventory: products with high stock but low sales in the last month"
  
  "Show supplier performance: total sales value generated by products from each supplier"
  
  "Find potential stockout risks: products with current stock below reorder level that have recent sales activity"
  ```

#### **Scenario 6: Financial Analysis & Forecasting**
- **Files**: Both Sales Data and Inventory Data
- **Prompts**:
  ```
  "Calculate ROI for each product category: (total_sales_revenue - total_inventory_cost) / total_inventory_cost * 100"
  
  "Show cash flow impact: total money tied up in inventory vs money generated from sales by category"
  
  "Identify optimization opportunities: products with high inventory cost but low sales performance"
  
  "Calculate break-even analysis: how many units of each low-stock product need to be sold to cover their inventory cost"
  ```

#### **Scenario 7: Operational Efficiency Analysis**
- **Files**: Both Sales Data and Inventory Data
- **Prompts**:
  ```
  "Compare sales rep performance with inventory availability in their regions"
  
  "Show warehouse utilization: products stored in each location with their sales velocity"
  
  "Identify seasonal patterns: compare January vs February sales with current inventory levels"
  
  "Calculate customer lifetime value: show total purchases per customer with product profitability"
  
  "Find cross-selling opportunities: customers who bought from one category but not others, with available inventory"
  ```

---

## Advanced Query Patterns to Test

### **Complex Aggregations**
```sql
-- Test AI's ability to generate complex window functions
"Show running totals of sales by date with ranking of daily performance"

-- Test AI's handling of percentiles
"Calculate median order value by region and show the 90th percentile customers"
```

### **Multi-Table Joins with Conditions**
```sql
-- Test complex join conditions
"Show products sold in the last week where current inventory is below 50% of reorder level"

-- Test multiple aggregation levels
"Calculate average days between restock date and first sale for each supplier"
```

### **Business Logic Implementation**
```sql
-- Test complex business calculations
"Calculate inventory days on hand: current_stock / (total_quantity_sold / 30) for products sold in January"

-- Test conditional logic
"Show reorder recommendations: if current stock < reorder level, calculate suggested order quantity based on average daily sales"
```

---

## Expected Outcomes

### **Success Indicators**
- âœ… AI generates syntactically correct DuckDB SQL
- âœ… Queries execute without errors
- âœ… Results match expected business logic
- âœ… Complex joins and aggregations work correctly
- âœ… Generated SQL is efficient and readable

### **Performance Benchmarks**
- **Simple queries**: < 2 seconds execution
- **Complex joins**: < 5 seconds execution
- **Large aggregations**: < 10 seconds execution

### **Common Edge Cases to Verify**
- Null values in calculations
- Division by zero scenarios
- Date format consistency
- String matching with special characters
- Case sensitivity in text fields

---

## Testing Workflow

1. **Upload both test CSV files** to the system
2. **Start Miscellaneous Flow** and select both files
3. **Test prompts systematically** from Basic â†’ Advanced
4. **Verify results** for business logic accuracy
5. **Check generated SQL** for quality and efficiency
6. **Export results** in CSV/Excel format for validation
7. **Use Data Viewer** to explore results in detail

---

## Troubleshooting Common Issues

### **File Upload Issues**
- Ensure CSV files have proper headers
- Check for special characters in file names
- Verify file size is within limits

### **Query Failures**
- Check if column names in prompts match actual data
- Verify date formats are consistent
- Ensure numeric fields don't contain text

### **Performance Issues**
- Break complex queries into smaller parts
- Use specific column names instead of SELECT *
- Add appropriate WHERE clauses to limit data

---

## ðŸ”¥ **Expert-Level Advanced Scenarios**

### **Scenario 8: Complex File Merging with Dynamic Transformations**
- **Files**: Both Sales Data and Inventory Data
- **Advanced Prompts**:
  ```
  "Merge sales and inventory data on product_id, then create dynamic columns: for each payment method (Credit Card, PayPal, Cash, Debit Card), show total sales amount as separate columns like 'sales_credit_card', 'sales_paypal', etc."
  
  "Join sales with inventory where category='Electronics' AND region in ('North', 'South') AND current_stock > 20, then create a new column 'profitability_tier' that shows 'High' if profit margin > 50%, 'Medium' if 20-50%, 'Low' if < 20%"
  
  "Merge files and filter for products sold in January 2024 where inventory status='Active' and total_amount > 100, then pivot the data to show each sales rep as columns with their total sales values"
  
  "Combine sales and inventory data, filter for categories with total sales > 500 and average stock > 15, then create dynamic columns based on order status: 'completed_orders', 'pending_orders', 'cancelled_orders' with counts and totals"
  ```

### **Scenario 9: Multi-Conditional Merging with Calculated Fields**
- **Files**: Both Sales Data and Inventory Data  
- **Advanced Prompts**:
  ```
  "Merge sales and inventory on product_id, filter for orders between 2024-01-20 and 2024-02-01 where payment_method != 'Cash' AND current_stock < reorder_level, then add columns: 'days_since_restock' (current date - last_restock_date), 'stock_velocity' (quantity_sold/current_stock), and 'urgency_score' (1-10 based on stock_velocity)"
  
  "Join files where supplier_name contains 'Tech' AND region in ('North', 'East') AND unit_price > 50, then create region-based dynamic columns showing inventory value: 'north_inventory_value', 'east_inventory_value', and a combined 'total_regional_value'"
  
  "Merge data filtering for products with shelf_life_days < 365 AND total orders > 2, then create dynamic status columns based on current_stock levels: 'critical_stock' (< 5), 'low_stock' (5-15), 'adequate_stock' (16-30), 'high_stock' (> 30) with product counts in each category"
  ```

### **Scenario 10: Advanced Pivot and Aggregation Transformations**
- **Files**: Both Sales Data and Inventory Data
- **Expert-Level Prompts**:
  ```
  "Merge sales and inventory data, filter for categories where total revenue > 1000 AND average reorder_level > 10, then create a pivot table with suppliers as rows and categories as columns, showing total profit (sales - inventory cost) in each cell"
  
  "Join files on product_id where order_date >= '2024-01-15' AND warehouse_location like 'A-%' AND payment_method in ('Credit Card', 'PayPal'), then create dynamic columns for each category showing: 'avg_margin_electronics', 'avg_margin_furniture', 'avg_margin_appliances' calculated as (unit_price - unit_cost) / unit_cost * 100"
  
  "Combine data filtering for active products with sales_rep in ('Sarah Johnson', 'Mike Chen') AND quantity > 1, then create a matrix with products as rows and create dynamic columns based on order_date month: 'january_quantity', 'february_quantity', 'january_revenue', 'february_revenue'"
  
  "Merge files where current_stock > 0 AND status != 'Cancelled', then create conditional dynamic columns: for each unique sales_rep, create columns like 'sarah_johnson_orders', 'mike_chen_orders' showing order count, AND create corresponding revenue columns 'sarah_johnson_revenue', 'mike_chen_revenue'"
  ```

### **Scenario 11: Complex Business Logic with Multiple Transformations**
- **Files**: Both Sales Data and Inventory Data
- **Ultimate Complexity Prompts**:
  ```
  "Merge sales and inventory where (category='Electronics' AND current_stock < 20) OR (category='Furniture' AND unit_price > 200) OR (category='Appliances' AND reorder_level > 8), then create dynamic risk assessment columns: 'stockout_risk_score' (based on stock vs reorder level), 'revenue_impact_score' (based on sales velocity), and for each supplier create columns 'supplier_X_risk_products' showing count of risky products"
  
  "Join files filtering for products sold in last 2 weeks where (payment_method='Credit Card' AND region in ('North','South')) OR (payment_method='PayPal' AND total_amount > 150), then create a comprehensive analysis with dynamic columns: for each warehouse location, show 'location_X_total_sales', 'location_X_avg_margin', 'location_X_stock_efficiency' (sales/stock ratio)"
  
  "Merge data with complex conditions: products where ((current_stock / reorder_level) < 1.5 AND category != 'Furniture') OR (shelf_life_days < 500 AND total sales > average total sales), then create advanced dynamic columns: for each combination of region+category, create 'region_category_performance' columns showing sales performance index (actual sales / expected sales based on stock levels)"
  ```

### **Scenario 12: Real-World Business Intelligence Transformations**
- **Files**: Both Sales Data and Inventory Data
- **Production-Ready Prompts**:
  ```
  "Create a comprehensive dashboard by merging files with filters: active products, completed orders, sales after 2024-01-15, then generate dynamic KPI columns: for each sales rep create 'rep_X_conversion_rate' (completed orders / total orders), 'rep_X_avg_deal_size', 'rep_X_profit_contribution', and regional performance columns 'region_X_market_share', 'region_X_growth_rate'"
  
  "Merge and transform data for executive reporting: filter for high-value transactions (> $200) with adequate stock levels (> reorder_level), then create strategic columns: 'customer_lifetime_value' (total purchases per customer), dynamic supplier performance columns 'supplier_X_roi', 'supplier_X_reliability_score', and category-wise profitability columns 'category_X_profit_margin_trend'"
  
  "Build advanced analytics by joining files where order_date in last 30 days AND current_stock > 0 AND supplier has > 2 products, then create predictive columns: 'inventory_turnover_rate', 'days_to_stockout' (current_stock / daily_avg_sales), and for each product create dynamic forecast columns: 'next_30_days_demand', 'recommended_reorder_quantity', 'optimal_stock_level'"
  ```

---

## Extending Test Scenarios

To create additional test scenarios:

1. **Add more data files** (customers, suppliers, products)
2. **Create time-series data** for trend analysis
3. **Include hierarchical data** for rollup queries
4. **Add categorical data** for segmentation analysis
5. **Include geographic data** for location-based insights

This testing guide ensures comprehensive validation of the Miscellaneous Data Processing feature across various business use cases and technical complexity levels.